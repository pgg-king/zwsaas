import{_ as O,B as R,C as P,e as N,f as U,D as z,t as A}from"./index.fc627453.js";import"./vue.4c5758a0.js";import{l as I}from"./lodash.28c974ad.js";import{d as q,r as f,w as V,aX as m,Z as p,_ as h,ax as _,c as i,bd as s,S as g,an as d,$ as D,aw as j,X as E,a0 as F,a2 as H,H as X}from"./@vue.87afd1fa.js";import"./js-md5.3cdd41c4.js";import"./@babel.dd651e2b.js";import"./regenerator-runtime.8e24db72.js";import"./vue-router.9a2c52dc.js";import"./js-cookie.31874410.js";import"./ant-design-vue.e954adc4.js";import"./@ant-design.8c82b126.js";import"./@ctrl.fa7cbd46.js";import"./resize-observer-polyfill.8deb1e21.js";import"./vue-types.6e6d84ba.js";import"./dom-align.f1b5d360.js";import"./lodash-es.0ea26897.js";import"./dayjs.0743a87f.js";import"./async-validator.5d25c98b.js";import"./scroll-into-view-if-needed.5191fdbf.js";import"./compute-scroll-into-view.6058b3be.js";import"./spark-md5.2cc5764b.js";import"./@vueuse.67682d36.js";import"./vue-demi.24ed2461.js";import"./axios.e3200588.js";/* empty css                     */import"./sortablejs.412b554c.js";import"./clipboard.89482ba1.js";import"./markdown-it.39ce48f9.js";import"./entities.0d2c0164.js";import"./uc.micro.981ceb7b.js";import"./mdurl.ef76b4dc.js";import"./linkify-it.92c30060.js";import"./markdown-it-emoji.e3e91710.js";import"./escape-html.e5dfadb9.js";import"./prismjs.169105cf.js";import"./diacritics.6be19c75.js";import"./markdown-it-container.512a5043.js";import"./markdown-it-anchor.c88e5394.js";import"./markdown-it-attrs.3af5ab50.js";import"./markdown-it-table-of-contents.8a4ce16f.js";import"./@kangc.52338b19.js";const G=q({name:"ExSelectTable",props:{value:[String,Array,Number],params:Object,gridUrl:String,submitUrl:String,remoteParams:{type:Object,default:{}},submitParams:{type:Object,default:{}},custom:Boolean,quick:Boolean,multiple:Boolean,gridRefresh:Boolean,modalRefresh:Boolean,gridBatch:Boolean},inheritAttrs:!1,emits:["update:value"],setup(e,l){const y=R(),C=P(),n=f(e.multiple?[...e.value]:e.value),v=f(!1),b=f([]),r=f(null),a=f(e.value||[]),c=f("");Array.isArray(a.value)||(a.value=[a.value]);const S={x:"max-content",y:window.innerHeight/2};e.submitUrl&&!N(e.value)&&o(),V(()=>e.value,t=>{n.value=t}),V(n,t=>{e.multiple?a.value=t:t?a.value=[t]:a.value=[],l.emit("update:value",t),a.value.length>0&&k()});function B(){e.gridUrl&&(c.value=null,v.value=!0,U({url:e.gridUrl,method:"POST",data:e.params}).then(t=>{Object.assign(t.attribute.params,e.params),c.value=t}))}const k=I.exports.throttle(o,500,{trailing:!1});function o(){let t=Object.assign(e.submitParams,{ex_eadmin_select_id:a.value});C&&(t.data=C.submitData());let u=[];e.gridBatch&&(u=y.exposed.selectIds.value),e.submitUrl?U({url:e.submitUrl,method:"POST",data:t},e.gridBatch,u).then($=>{if(e.quick){e.gridRefresh&&y.exposed.refresh(),e.modalRefresh&&z.modalRefresh(),v.value=!1;return}e.custom?r.value=$.data:b.value=$.data,T()}):T()}function T(){v.value=!1;const t=[];if(a.value.forEach(u=>{t.push(u)}),e.multiple)n.value=t;else{let u=t.pop();typeof u!="undefined"&&(n.value=u)}}function w(){e.multiple?n.value=[]:n.value=null}return{submit:o,clear:w,trans:A,throttleSubmit:k,open:B,content:c,options:b,selectValue:n,selection:a,visible:v,height:S,customRender:r}}}),Z={key:0},J={class:"action"},K={key:2},L={key:0};function M(e,l,y,C,n,v){const b=m("plus-outlined"),r=m("a-button"),a=m("delete-outlined"),c=m("render"),S=m("a-select"),B=m("a-form-item-rest"),k=m("a-modal");return p(),h(X,null,[e.custom?(p(),h("div",Z,[_("div",J,[i(r,{size:"small",onClick:e.open,disabled:e.$attrs.disabled},{icon:s(()=>[i(b)]),default:s(()=>[g(" "+d(e.trans("SelectTable.select")),1)]),_:1},8,["onClick","disabled"]),e.selectValue?(p(),D(r,{key:0,size:"small",onClick:e.clear,disabled:e.$attrs.disabled},{icon:s(()=>[i(a)]),default:s(()=>[g(" "+d(e.trans("SelectTable.clear")),1)]),_:1},8,["onClick","disabled"])):j("",!0)]),i(c,{data:e.customRender},null,8,["data"])])):e.quick?(p(),h("span",{key:1,onClick:l[0]||(l[0]=(...o)=>e.open&&e.open(...o))},[E(e.$slots,"default",{},()=>[i(r,{size:"small",disabled:e.$attrs.disabled},{icon:s(()=>[i(b)]),default:s(()=>[g(" "+d(e.trans("SelectTable.select")),1)]),_:1},8,["disabled"])],!0)])):(p(),h("div",K,[i(S,F(e.$attrs,{value:e.selectValue,"onUpdate:value":l[1]||(l[1]=o=>e.selectValue=o),options:e.options,"allow-clear":"",open:!1,onClick:e.open}),null,16,["value","options","onClick"])])),i(k,{visible:e.visible,"onUpdate:visible":l[4]||(l[4]=o=>e.visible=o),width:"80%",destroyOnClose:""},{footer:s(()=>[_("div",{class:H(e.multiple&&e.selection.length>0?"footer":"")},[e.multiple&&e.selection.length>0?(p(),h("div",L,d(e.trans("SelectTable.selected"))+": "+d(e.selection.length),1)):j("",!0),_("div",null,[i(r,{type:"primary",onClick:e.throttleSubmit},{default:s(()=>[g(d(e.trans("SelectTable.confirm")),1)]),_:1},8,["onClick"]),i(r,{onClick:l[3]||(l[3]=o=>e.visible=!1)},{default:s(()=>[g(d(e.trans("SelectTable.cancel")),1)]),_:1})])],2)]),default:s(()=>[i(B,null,{default:s(()=>[i(c,{data:e.content,selection:e.selection,"onUpdate:selection":l[2]||(l[2]=o=>e.selection=o),scroll:e.height,hideSelection:!1,"selection-type":e.multiple?"checkbox":"radio"},null,8,["data","selection","scroll","selection-type"])]),_:1})]),_:1},8,["visible"])],64)}var Ie=O(G,[["render",M],["__scopeId","data-v-40fc7f9c"]]);export{Ie as default};
